<!-- Setup Script -->
<!-- =================================================================
======================================================================
======================================================================
================================================================== -->
<script setup>
/* Import Style Sheet */
/* =================================================================
================================================================= */
import './style.css';
</script>





<!-- Template -->
<!-- Source: https://codesandbox.io/s/custom-vuejs-select-component-8nqgd?file=/App.vue:72-238 -->
<!-- =================================================================
======================================================================
======================================================================
================================================================== -->
<template>
    <!-- Container -->
    <!-- =================================================================
    ======================================================================
    ================================================================== -->
    <div id="dropdown_container">
        <!-- Header -->
        <!-- ============================================================ -->
        <!-- ============================================================ -->
        <h6 id="dropdown_header">{{header}}</h6>



        <!-- Dropdown Element -->
        <!-- ============================================================ -->
        <!-- ============================================================ -->
        <div id="dropdown_element" class="dropdown" :tabindex="tabindex" @blur="open = false">
            <!-- Label -->
            <!-- ============================================================ -->
            <div id="dropdown_label" :class="[{open:open}, isenabled ? 'dropdown_active' : 'dropdown_unactive', 'dropdown']" @click="open == false && isenabled == true ? open = !open : open = false">{{selected}}
              <!-- Icon -->
              <svg id="dropdown_icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 15.0006L7.75732 10.758L9.17154 9.34375L12 12.1722L14.8284 9.34375L16.2426 10.758L12 15.0006Z"></path></svg>
            </div>


            <!-- Menu Items -->
            <!-- ============================================================ -->
            <div id="dropdown_menu_items" class="dropdown" :class="{selectHide: !open}">
                <div class="dropdown" v-for="(option, i) of options" :key="i" @click="onSelectionChange(option)">{{ option }}</div>
            </div>
        </div>
    </div>
</template>





<!-- Script -->
<!-- =================================================================
======================================================================
======================================================================
================================================================== -->
<script>
export default {
  /* Properties */
  /* ==================================================================
  =====================================================================
  ================================================================== */
  props: {
    /* Header */
    /* ==================================================================
    ================================================================== */
    header: { type: String, required: true },



    /* Options */
    /* ==================================================================
    ================================================================== */
    options: { type: Array, required: false },
    
    
    /* Default Value */
    /* ==================================================================
    ================================================================== */
    default: { type: String, required: false, default: "Select an Option..." },
    

    /* Tab Index */
    /* ==================================================================
    ================================================================== */
    tabindex: { type: Number, required: false, default: 0 },


    /* Is Enabled */
    /* ==================================================================
    ================================================================== */
    isenabled: { type: Boolean, required: false, default: true },


    /* Is Clear */
    /* ==================================================================
    ================================================================== */
    isclear: { type: String, required: false, default: "" },
  },




  /* Data */
  /* ==================================================================
  =====================================================================
  ================================================================== */
  data() {
    return {
      /* Selected */
      /* ==================================================================
      ================================================================== */
      selected: this.default
      ? this.default
      : this.options.length > 0
      ? this.options[0]
      : null,
      


      /* Open */
      /* ==================================================================
      ================================================================== */
      open: false
    };
  },




  /* Watch */
  /* ==================================================================
  =====================================================================
  ================================================================== */
  watch: {
    /* Is Clear */
    /* ==================================================================
    ================================================================== */
    isclear (newvalue, oldvalue) {
      //Validate Clear
      if(oldvalue != newvalue){
        // Clear Selection
        this.selected =  this.default
          ? this.default
          : this.options.length > 0
          ? this.options[0]
          : null;
      }
    }
  },




  /* Methods */
  /* ==================================================================
  =====================================================================
  ================================================================== */
  methods: {
    /* On Selection Change */
    /* ==================================================================
    ================================================================== */
    onSelectionChange: function (option) {
      // Set Open to False
      this.open = false;

      // Set Selected Option to option
      this.selected = option;

      // Send option to Parent Component (the View)
      this.$emit('clicked', option)
    }
  },




  /* Mounted */
  /* ==================================================================
  =====================================================================
  ================================================================== */
  mounted() { this.$emit("input", this.selected); },
};
</script>